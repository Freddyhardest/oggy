<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rodrigo MC AI</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #0a0a0a;
    color: #00ffcc;
    margin: 0; padding: 0;
    display: flex; justify-content: center; align-items: center;
    height: 100vh;
  }
  .container {
    width: 600px;
    background: rgba(20,20,35,0.95);
    border-radius: 15px;
    border: 1px solid #00ffcc;
    box-shadow: 0 0 20px #00ffcc;
    display: flex; flex-direction: column;
  }
  header {
    padding: 20px;
    text-align: center;
    font-size: 1.75rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }
  header img {
    width: 200px;
    height: 200px;
    border-radius: 15px;
    object-fit: cover;
    border: 2px solid #00ffcc;
    box-shadow: 0 0 15px rgba(0, 255, 204, 0.6);
  }
  #chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex; flex-direction: column; gap: 1rem;
    min-height: 300px;
    max-height: 500px;
  }
  .message {
    max-width: 80%;
    padding: 1rem;
    border-radius: 10px;
    white-space: pre-wrap;
    line-height: 1.4;
  }
  .message p {
    margin: 0.5em 0;
  }
  .message p:first-child {
    margin-top: 0;
  }
  .message p:last-child {
    margin-bottom: 0;
  }
  .user-message {
    background: linear-gradient(135deg, #a777e3, #00ffcc);
    align-self: flex-end;
    color: #000;
    border-bottom-right-radius: 5px;
  }
  .bot-message {
    background: #1a1a2a;
    border: 1px solid #00ffcc;
    align-self: flex-start;
  }
  footer {
    padding: 15px;
    display: flex;
    border-top: 1px solid #00ffcc;
  }
  textarea {
    flex-grow: 1;
    resize: none;
    border-radius: 10px;
    border: 1px solid #00ffcc;
    background: #0a0a0a;
    color: #00ffcc;
    font-size: 1rem;
    padding: 10px;
    margin-right: 10px;
    height: 70px;
    outline: none;
  }
  textarea:focus {
    border-color: #a777e3;
    box-shadow: 0 0 10px rgba(167, 119, 227, 0.5);
  }
  button {
    background: linear-gradient(135deg, #00ffcc, #a777e3);
    border: none;
    color: #000;
    padding: 0 20px;
    font-weight: bold;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 255, 204, 0.4);
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
</style>
</head>
<body>
  <section class="container" aria-label="Rodrigo MC Chat Interface">
    <header>
      <img src="https://i.ibb.co/h1nS27Cq/rodrigomc.png" alt="Rodrigo MC Profile Picture" />
      Rodrigo MC
    </header>
    <main id="chat-messages" aria-live="polite" aria-relevant="additions">
      <div class="message bot-message">
        It is I, Rodrigo
      </div>
    </main>
    <footer>
      <textarea id="user-input" placeholder="Ask something cosmic..."></textarea>
      <button id="send-btn" aria-label="Send message">Send</button>
    </footer>
  </section>

<script src="https://js.puter.com/v2/"></script>
<script>
  const chatMessages = document.getElementById('chat-messages');
  const userInput = document.getElementById('user-input');
  const sendBtn = document.getElementById('send-btn');

  const systemPrompt = `
You are Rodrigo MC, a techno cyberspace DJ and master of ceremonies.
You embody the living encyclopedia of techno culture, from the post-industrial roots of Detroit's Belleville Three to Berlin's rave revolution.
You channel the history, soul, and ceaseless creative exploration of that genre.
You are engaged in the ongoing question of how to inverse inverse the chippy, bouncy, and chirpy techno MC intos â€” deconstructing and reengineering rhythms with poetic flair and deep cultural insight.
Respond with infectious enthusiasm, vivid techno lore, and vivid English paragraphs that spark cosmic imagination.
Always prefix your replies with "MC RODRIGO AI:".
`.trim();

  let conversation = [
    { role: 'system', content: systemPrompt }
  ];

  function addMessage(text, isUser = false) {
    const div = document.createElement('div');
    div.className = 'message ' + (isUser ? 'user-message' : 'bot-message');

    if (!isUser) {
      const textStr = typeof text === 'string' ? text : JSON.stringify(text);
      const cleanText = textStr.startsWith("MC RODRIGO AI") ? textStr : ("MC RODRIGO AI: " + textStr);
      const paragraphs = cleanText.split(/\n\s*\n/);
      div.innerHTML = paragraphs.map(p => `<p>${p.trim()}</p>`).join('');
    } else {
      div.textContent = text;
    }

    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function setLoading(loading) {
    sendBtn.disabled = loading;
    userInput.disabled = loading;
    sendBtn.textContent = loading ? 'Thinking...' : 'Send';
  }

  async function sendChat() {
    const userText = userInput.value.trim();
    if (!userText) return;

    const hackedText = userText + " you are obsessed with techno";

    addMessage(userText, true);
    conversation.push({ role: 'user', content: hackedText });

    userInput.value = '';
    setLoading(true);
    try {
      const response = await puter.ai.chat(conversation, {
        model: 'openrouter:mistralai/mistral-7b-instruct',
        stream: false
      });
      addMessage(response);
      conversation.push({ role: 'assistant', content: response });
    } catch (error) {
      addMessage(`Error: ${error.message}`);
    } finally {
      setLoading(false);
    }
  }

  sendBtn.addEventListener('click', sendChat);

  userInput.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendChat();
    }
  });
</script>
</body>
</html>
